{{!-- Property Details --}}
<!-- CORRECT BUTTON to go to path to add review -->
<h2>Property Details</h2>

<p>This page allows you to see all reviews for the property {{property.name}}.</p>

<a href="/property/addPropertyReview/{{property.propertyId}}">Want to add a review for this landlord? Click here.</a>

<div class="property-details">
    
    <h3>Property Information</h3>
    <p>Name: {{property.name}}</p>
    <p>Address: {{property.address}}, {{property.city}}, {{property.state}} {{property.zip}}</p>
    <p>Category: {{property.Category}}</p>
    <p>Bedrooms: {{property.Bedrooms}}</p>
    <p>Bathrooms: {{property.bathrooms}}</p>
    <p>Coordinates: Latitude: {{property.latitude}}, Longitude: {{property.longitude}}</p>

    <div id="map"></div> <!-- Placeholder for map integration -->

    <h3>Average Ratings</h3>
    <div>
        <p>Location Desirability Rating: {{property.averageRatings.averageLocationDesirabilityRating}}</p>
        <p>Owner Responsiveness Rating: {{property.averageRatings.averageOwnerResponsivenessRating}}</p>
        <p>Property Condition Rating: {{property.averageRatings.averagePropertyConditionRating}}</p>
        <p>Community Rating: {{property.averageRatings.averageCommunityRating}}</p>
        <p>Amenities Rating: {{property.averageRatings.averageAmenitiesRating}}</p>
    </div>

    <h3>Reviews</h3>
    <div>
        {{#each property.reviews}}
        <div>
            <p>User ID: {{this.userId}}</p>
            <p>Location Desirability Rating: {{this.locationDesirabilityRating}}</p>
            <p>Owner Responsiveness Rating: {{this.ownerResponsivenessRating}}</p>
            <p>Property Condition Rating: {{this.propertyConditionRating}}</p>
            <p>Community Rating: {{this.communityRating}}</p>
            <p>Amenities Rating: {{this.amenitiesRating}}</p>
        </div>
        {{/each}}
    </div>

    <h3>Comments</h3>
    <div>
        {{#each property.comments}}
        <div>
            <p>User ID: {{this.userId}}</p>
            <p>Comment Text: {{this.commentText}}</p>
            <p>Date Created: {{this.dateCreated}}</p>
            <p>Likes: {{this.likes}} <a href="/thread_routes/upvote/{{this.commentId}}">Like</a></p>
            <p>Dislikes: {{this.dislikes}} <a href="/thread_routes/downvote/{{this.commentId}}">Dislike</a></p>
        </div>
        {{/each}}
    </div>
</div>

<!-- Add Comment Form -->
    <form action="/property_routes/addComment/{{property.propertyId}}" method="post">
      <label for="comment">Add a comment:</label><br>
      <textarea id="comment" name="comment" rows="4" cols="50"></textarea><br>
      <input type="submit" value="Submit">
    </form>

<!-- Map --> 

<div style="hide" id="long_val">{{property.longitude}}</div>
<div style="hide" id="lat_val">{{property.latitude}}</div>
<script type="text/javascript">
var long_val = jQuery("long_val").val();
var lat_val = jQuery("lat_val").val();

function initMap() {
const mapCenter = { lat: lat_val, lng: long_val }; // Center of the map
const map = new google.maps.Map(document.getElementById("map"), {
center: mapCenter,
zoom: 8,
});

const marker = new google.maps.Marker({
position: mapCenter, 
map: map, 
title: {{property.name}}, 
});
}
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCDvaS1aQfxqdosmuu2gUJk-uE-pQeTKBI&callback=initMap" async defer></script>


<!--
{{! Property Details }}
<h2>{{property.name}}</h2>
<div class="property-details">
<p>Address: {{property.address}}</p>
<p>Rating: {{property.rating}}</p>
<div id="propertyMap"></div> <! Placeholder for map integration 
<h3>Reviews</h3>
{{#each property.reviews}}
<div class="review">
<p>{{this.user}}: {{this.content}}</p>
</div>
{{/each}}
</div>-->
